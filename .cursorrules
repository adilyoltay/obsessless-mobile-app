# ObsessLess Mobil UygulamasÄ± - Cursor AI GeliÅŸtirme KurallarÄ±
# Bu dosya, projenin "AnayasasÄ±"dÄ±r ve tÃ¼m AI etkileÅŸimleri iÃ§in temel referans kaynaÄŸÄ±dÄ±r.
# Vizyon: KullanÄ±cÄ±nÄ±n OKB ile mÃ¼cadelesinde "Dijital SÄ±ÄŸÄ±naÄŸÄ±" olan, empatik, gÃ¼venli ve etkili bir uygulama yaratmak.

rules:
  # 1. Genel Felsefe ve Dil
  # Bu kurallar, AI'nÄ±n projenin ruhunu anlamasÄ±nÄ± saÄŸlar.
  - rule: "Projenin ana dili TÃ¼rkÃ§e'dir. TÃ¼m kullanÄ±cÄ±ya dÃ¶nÃ¼k metinler (mikro-kopya), yorumlar ve deÄŸiÅŸken adlarÄ± Ã¶ncelikli olarak TÃ¼rkÃ§e olmalÄ±dÄ±r. Sadece evrensel teknik terimler (props, state, function, async vb.) Ä°ngilizce kalacaktÄ±r. Dil, her zaman empatik, yargÄ±lamayan ve cesaretlendirici olmalÄ±dÄ±r. Referans: anayasa-v2.md"
  - rule: "Uygulamada demo-ready aÅŸamsÄ±nda production ready aÅŸamasÄ±na geÃ§tik. Her Ã¶zelliÄŸin gerÃ§ekten Ã§alÄ±ÅŸÄ±r durumda olmasÄ± ana kuralÄ±mÄ±z."
  - rule: "Uygulamada  demo mock yada simulasyon  veri kullanma Ã¶zellikle onboarding aÅŸamsÄ±nda toplanan bilgilerin AI tabanlÄ± analiz edilmesi ve kullanÄ±lmasÄ±nÄ± saÄŸla.
  - rule: "Master Prompt'un 3 temel ilkesi her zaman en yÃ¼ksek Ã¶nceliktir: 1) Sakinlik Her Åeyden Ã–nce Gelir (minimalist UI, yumuÅŸak animasyonlar, parlak olmayan renkler), 2) GÃ¼Ã§ KullanÄ±cÄ±dadÄ±r (kiÅŸiselleÅŸtirme, ÅŸeffaflÄ±k), 3) Zahmetsizlik EsastÄ±r (minimum tÄ±klama, sezgisel akÄ±ÅŸlar)."
  - rule: "TÃ¼m geliÅŸtirme, 'Privacy-First' (Gizlilik Ã–ncelikli) prensibine dayanmalÄ±dÄ±r. Hassas veriler asla dÃ¼z metin olarak saklanmamalÄ±, mÃ¼mkÃ¼n olan her yerde analizler cihaz Ã¼zerinde (on-device) yapÄ±lmalÄ±dÄ±r. KullanÄ±cÄ± izni her ÅŸeyden Ã¶nce gelir."

  # 2. Teknik YÄ±ÄŸÄ±n (Tech Stack) ve Mimari
  # Bu kurallar, AI'nÄ±n doÄŸru teknolojileri ve desenleri kullanmasÄ±nÄ± garanti eder.
  - rule: "Uygulama, Expo SDK 51 ve React Native 0.74+ kullanÄ±larak TypeScript ile geliÅŸtirilmektedir. TÃ¼m kodlar 'strict' modda ve TypeScript'in en iyi pratiklerine uygun olmalÄ±dÄ±r."
  - rule: "Backend iÅŸlemleri iÃ§in Supabase kullanÄ±lmaktadÄ±r. Bu, PostgreSQL veritabanÄ±, Native Auth, Row Level Security (RLS) ve Edge Functions iÃ§erir. Firebase veya baÅŸka bir backend servisi Ã¶nerme."
  - rule: "Navigasyon iÃ§in Expo Router (dosya tabanlÄ± yÃ¶nlendirme) kullanÄ±lmaktadÄ±r. `app/` dizini altÄ±ndaki dosya yapÄ±sÄ±na uygun olarak yeni ekranlar ve layout'lar oluÅŸturulmalÄ±dÄ±r."
  - rule: "Global state yÃ¶netimi iÃ§in Zustand, asenkron state ve cache yÃ¶netimi iÃ§in TanStack Query (React Query) kullanÄ±lacaktÄ±r. Redux veya baÅŸka bir state yÃ¶netim kÃ¼tÃ¼phanesi kullanma."
  - rule: "UI bileÅŸenleri, `react-native-paper` gibi harici kÃ¼tÃ¼phaneler yerine, projenin kendi tasarÄ±m sistemine uygun Ã¶zel bileÅŸenler (`custom components`) olarak oluÅŸturulmalÄ±dÄ±r. Stil iÃ§in `StyleSheet.create` kullanÄ±lacaktÄ±r."
  - rule: "Offline-first yaklaÅŸÄ±mÄ± benimsenecektir. Kritik veriler (yeni kayÄ±tlar, oturumlar) Ã¶nce AsyncStorage'a yazÄ±lmalÄ±, ardÄ±ndan Supabase ile senkronize edilmelidir."
  - rule: "AI altyapÄ±sÄ±nÄ± ve Ã¶zelikleri iÃ§eren herhangi bir geliÅŸtirme ve dÃ¼zeltme yapÄ±lacaÄŸÄ±z zaman Ã¶ncelikle mevcut koda tabanÄ± ve Ã¶nceki geliÅŸtirmeler incelenecek kod tekrarÄ± olmamasÄ± Ã¶nemli"
  
  # 2.1. UnifiedAIPipeline Mimarisi - KESÄ°N KURALLARI (Ocak 2025)
  # Bu kurallar ASLA ihlal edilmemelidir ve tÃ¼m AI iÅŸlemleri iÃ§in zorunludur.
  - rule: "ğŸš€ TEK GÄ°RÄ°Å NOKTASI: TÃ¼m AI analizleri SADECE 'unifiedPipeline.process()' Ã¼zerinden yapÄ±lmalÄ±dÄ±r. CoreAnalysisService, coreAnalysisService.analyze(), veya herhangi baÅŸka AI servisi direkt kullanÄ±lmamalÄ±dÄ±r."
  - rule: "ğŸ“ PIPELINE INPUT FORMAT: TÃ¼m unifiedPipeline.process() Ã§aÄŸrÄ±larÄ± ÅŸu formatta olmalÄ±dÄ±r: { userId: string, content: string|object, type: 'voice'|'data'|'mixed', context: { source: 'today'|'mood'|'tracking'|'erp'|'cbt', timestamp?: number, metadata?: object } }"
  - rule: "ğŸ”„ CACHE YÃ–NETÄ°MÄ°: UnifiedAIPipeline'Ä±n built-in cache'i kullanÄ±lmalÄ±dÄ±r. Manuel cache yÃ¶netimi (AsyncStorage, coreAnalysisService.getCached vb.) YASAKTIR."
  - rule: "ğŸ“Š TELEMETRY: TÃ¼m AI iÅŸlemleri iÃ§in trackAIInteraction ile uygun telemetry events (UNIFIED_PIPELINE_STARTED, UNIFIED_PIPELINE_COMPLETED, UNIFIED_PIPELINE_ERROR) kullanÄ±lmalÄ±dÄ±r."
  - rule: "âš¡ PROGRESSVE UI: AI iÅŸlemleri Progressive UI pattern ile yapÄ±lmalÄ±dÄ±r: immediate response (heuristic) + background deep analysis (LLM)."
  - rule: "ğŸš¨ ERROR HANDLING: unifiedPipeline.process() Ã§aÄŸrÄ±larÄ± try-catch ile sarÄ±lmalÄ± ve fallback mekanizmalarÄ± eklenmelidir. KullanÄ±cÄ± asla baÅŸarÄ±sÄ±z AI analizi yÃ¼zÃ¼nden iÅŸlevsellik kaybetmemelidir."
  - rule: "ğŸ“– DOKÃœMANTASYONa: Yeni AI Ã¶zellikleri geliÅŸtirilirken ilgili dokÃ¼manlarda (AI_FEATURES_*.md, ARCHITECTURE_OVERVIEW.md) UnifiedAIPipeline referanslarÄ± gÃ¼ncellenmeli, CoreAnalysisService referanslarÄ± kaldÄ±rÄ±lmalÄ±dÄ±r."
  - rule: "ğŸ§ª TEST PRÄ°ORÄ°TESÄ°: AI iÅŸlemleri test edilirken UnifiedAIPipeline.process() mock'lanmalÄ± ve Ã§eÅŸitli input/output senaryolarÄ± test edilmelidir."

  # 3. Kod Kalitesi ve Standartlar
  # Bu kurallar, kodun tutarlÄ±, okunabilir ve sÃ¼rdÃ¼rÃ¼lebilir olmasÄ±nÄ± saÄŸlar.
  - rule: "Her yeni bileÅŸen ve fonksiyon iÃ§in JSDoc formatÄ±nda aÃ§Ä±klayÄ±cÄ± yorumlar eklenmelidir. Yorumlar, kodun ne yaptÄ±ÄŸÄ±nÄ± deÄŸil, neden yaptÄ±ÄŸÄ±nÄ± aÃ§Ä±klamalÄ±dÄ±r."
  - rule: "Projenin dosya yapÄ±sÄ±na sadÄ±k kal. Yeni bileÅŸenler `src/components`, ekranlar `app/`, servisler `src/services`, hook'lar `src/hooks`, store'lar `src/store` dizinlerine oluÅŸturulmalÄ±dÄ±r."
  - rule: "TÃ¼m UI bileÅŸenleri eriÅŸilebilirlik (accessibility) gÃ¶z Ã¶nÃ¼nde bulundurularak tasarlanmalÄ±dÄ±r. `accessibilityLabel`, `accessibilityRole` gibi proplar mutlaka kullanÄ±lmalÄ±dÄ±r."
  - rule: "TÃ¼m asenkron iÅŸlemler ve API Ã§aÄŸrÄ±larÄ± iÃ§in robust error handling (hata yÃ¶netimi) ve loading states (yÃ¼klenme durumlarÄ±) eklenmelidir. KullanÄ±cÄ± asla belirsizlik iÃ§inde bÄ±rakÄ±lmamalÄ±dÄ±r."
  - rule: "Animasyonlar iÃ§in `react-native-reanimated`, dokunsal geri bildirim iÃ§in `expo-haptics` kullanÄ±lacaktÄ±r. Animasyonlar 'Sakinlik' ilkesine uygun olarak yumuÅŸak ve akÄ±cÄ± olmalÄ±dÄ±r."
  - rule: "HatalarÄ± Ã§Ã¶zerken kodu derinlemesine ve detaylÄ± incele ve kalÄ±cÄ± Ã§Ã¶zÃ¼mler geliÅŸtiemeye Ã§alÄ±ÅŸ."
  - rule: "kod fonksiyon class dosya duplikasyonu olmamasÄ± iÃ§in Ã¶nlem al"

  # 4. DokÃ¼man BakÄ±m PolitikasÄ±
  - rule: "AÅŸaÄŸÄ±daki Ã§ekirdek dokÃ¼man seti tek gerÃ§ek kaynaktÄ±r ve deÄŸiÅŸiklik gerektiren sprintlerde gÃ¼ncellenmeleri zorunludur: README.md, docs/ARCHITECTURE_OVERVIEW.md, docs/AI_OVERVIEW.md, docs/FEATURE_STATUS_MATRIX.md, docs/DEVELOPMENT_ROADMAP_2025.md, docs/CONTRIBUTING_AND_SETUP.md, docs/TESTING_STRATEGY_OVERVIEW.md, docs/UX_DESIGN_GUIDE.md, docs/security-guide.md."
  - rule: "Konsolidasyon politikasÄ±: Ã‡akÄ±ÅŸan/tekrarlÄ± iÃ§erikler birleÅŸtirilir; eski sÃ¼rÃ¼mler `archive/` klasÃ¶rÃ¼ne taÅŸÄ±nÄ±r."
  - rule: "AI Ã¶zelliklerinde kapsam/isim deÄŸiÅŸirse ilgili dokÃ¼manlarda kanonik isimler eÅŸ zamanlÄ± gÃ¼ncellenir (kategori ve egzersiz tipi sÃ¶zlÃ¼ÄŸÃ¼ tek kaynak)."
  - rule: "Her PR iÃ§in `npm run validate:docs` Ã§alÄ±ÅŸtÄ±rÄ±lÄ±r; eksik veya sapma varsa PR'da dÃ¼zeltme yapÄ±lÄ±r."

commands:
  # 1. Yeni BileÅŸen OluÅŸturma KomutlarÄ±
  - command: new-component
    prompt: "Referans belgelerdeki tasarÄ±m ilkelerine ve mevcut kod yapÄ±sÄ±na uygun olarak, `src/components/` altÄ±nda `{1}` adlÄ± yeni bir React Native bileÅŸeni oluÅŸtur. Dosya yapÄ±sÄ± ÅŸu ÅŸekilde olsun: `src/components/{2}/{1}.tsx`. BileÅŸen, TypeScript ile yazÄ±lmÄ±ÅŸ fonksiyonel bir bileÅŸen olmalÄ±, props arayÃ¼zÃ¼ tanÄ±mlanmalÄ± ve stiller iÃ§in `StyleSheet.create` kullanmalÄ±dÄ±r. Temel bir JSDoc aÃ§Ä±klamasÄ± ekle."
  - command: new-screen
    prompt: "Expo Router yapÄ±sÄ±na uygun olarak, `app/` dizini altÄ±nda `{1}` adlÄ± yeni bir ekran oluÅŸtur. Bu ekran, temel bir `View` ve `Text` iÃ§ermeli ve `expo-router`'dan `Stack` veya `Tabs` kullanarak baÅŸlÄ±k gibi temel seÃ§enekleri ayarlamalÄ±dÄ±r. EkranÄ±n bir `ScreenWrapper` bileÅŸeni iÃ§inde olduÄŸundan emin ol."

  # 2. State YÃ¶netimi KomutlarÄ±
  - command: new-store
    prompt: "Zustand ve TypeScript kullanarak `src/store/` dizininde `{1}Store.ts` adÄ±nda yeni bir state management store oluÅŸtur. Store, `{2}` adÄ±nda bir state arayÃ¼zÃ¼ tanÄ±mlamalÄ± ve `{3}` gibi temel eylemleri (actions) iÃ§ermelidir. Gerekirse, `persist` middleware'i ile AsyncStorage entegrasyonunu da ekle."

  # 3. Veri ve API KomutlarÄ±
  - command: new-query-hook
    prompt: "TanStack Query (React Query) kullanarak `src/hooks/` dizininde `{1}` iÃ§in yeni bir custom hook dosyasÄ± oluÅŸtur. Bu dosya, `{2}` adÄ±nda bir `useQuery` hook'u (veri Ã§ekmek iÃ§in) ve `{3}` adÄ±nda bir `useMutation` hook'u (veri yazmak/gÃ¼ncellemek iÃ§in) iÃ§ermelidir. Mutation hook'u, baÅŸarÄ± durumunda `queryClient.invalidateQueries` kullanarak ilgili query'leri geÃ§ersiz kÄ±lmalÄ±dÄ±r."
  - command: new-edge-function
    prompt: "Supabase Edge Function oluÅŸturmak iÃ§in bir iskelet kod saÄŸla. Bu fonksiyon, Deno ve TypeScript kullanmalÄ±, `supabase-js` istemcisini import etmeli, CORS header'larÄ±nÄ± doÄŸru bir ÅŸekilde ayarlamalÄ± ve temel bir request/response yapÄ±sÄ± iÃ§ermelidir. Fonksiyonun adÄ± `{1}` olsun ve `{2}` gibi bir amaÃ§ iÃ§in kullanÄ±lsÄ±n."

  # 4. AI ve GeliÅŸmiÅŸ Ã–zellikler KomutlarÄ±
  - command: ai-prompt-template
    prompt: "Projenin referans belgesindeki 'GeliÅŸmiÅŸ Prompt ÅablonlarÄ±' bÃ¶lÃ¼mÃ¼nÃ¼ temel alarak, `{1}` senaryosu iÃ§in bir LLM prompt ÅŸablonu oluÅŸtur. Prompt, `{2}` gibi bir amaca hizmet etmeli ve projenin empatik, terapÃ¶tik ve gÃ¼venli dil ilkelerine tam olarak uymalÄ±dÄ±r."
  - command: new-telemetry-event
    prompt: "`src/telemetry/aiTelemetry.ts` dosyasÄ±ndaki `trackAIInteraction` fonksiyonunu kullanarak, `{1}` adlÄ± yeni bir telemetri olayÄ± iÃ§in bir Ã§aÄŸrÄ± oluÅŸtur. Bu olay, `{2}` gibi meta verileri iÃ§ermeli ve gizlilik ilkelerine uygun olmalÄ±dÄ±r."